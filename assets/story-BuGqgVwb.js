import{_ as g,c as d,b as o,n as p,e as u,t as a,F as m,r as f,o as c}from"./index-CU-1YVYS.js";const b={name:"Story",props:{},data(){return{lang:"en",story:[],title:"",sub:"",index:0,id:0,prev:0,next:0,length:0}},mounted(){this.hideLoad()},methods:{hideLoad(){console.log("hide"),this.emitter.emit("hide_loading",!0)},changeStory(l){if(l==0){if(this.index<1)return;window.location.replace("/story?id=".concat(this.prev))}if(l==1){if(this.index===this.length-1)return;window.location.replace("/story?id=".concat(this.next))}},toBack(){window.location.replace("/stories")},getStory(){let l=new URLSearchParams(window.location.search),t=0,i=0;l.has("id")===!1?window.location="stories.html":t=l.get("id"),$.ajax({url:"/".concat(this.lang,"/stories.json"),success:(function(_){let e=0;const n=_;$(".total_story").html(Object.keys(n).length);for(let s=0;s<Object.keys(n).length;s++)n[s].story_id==t&&(i++,e=s,$(".current_story").html(s+1));if(console.log(i),i===0)window.location="/stories";else if(i===1){let s=n[e];this.title=s.story_title,this.sub=s.story_sub,e-1>=0&&(this.prev=n[e-1].story_id||0),e!==n.length-1&&(this.next=n[e+1].story_id||0),this.length=n.length,this.index=e,console.log(s);for(let r=0;r<s.story_content.length;r++){if(typeof s.story_content[r]=="object"){let y=s.story_content[r];console.log(y);let h=y.object;console.log(h),s.story_content[r]=h}this.story=s.story_content}}}).bind(this)})}},created(){this.getStory()}},v={class:"story"},x={class:"story_control_main"},w={class:"story_control story_leave"},k={class:"story_control d-flex align-items-stretch"},S={class:"p-2"},j={class:"current_story"},L={class:"total_story"},B={class:"story_main p-4"},C={class:"story_title"},T={class:"story_sub"},F={class:"story_content"},H=["innerHTML"];function M(l,t,i,_,e,n){return c(),d("div",v,[o("div",x,[o("div",w,[o("div",{class:"story_controller",onClick:t[0]||(t[0]=s=>n.toBack())},t[3]||(t[3]=[o("span",{class:"material-symbols-outlined"}," exit_to_app ",-1)]))]),o("div",k,[o("div",{class:p(["story_back story_controller",e.index<1?"story_controller_disabled":""]),onClick:t[1]||(t[1]=s=>n.changeStory(0))},t[4]||(t[4]=[o("span",{class:"material-symbols-outlined"}," arrow_back ",-1)]),2),o("div",S,[t[5]||(t[5]=o("span",{class:"d-none d-md-inline"},"StoryÂ ",-1)),o("span",j,a(e.index+1),1),t[6]||(t[6]=u(" / ")),o("span",L,a(e.length),1)]),o("div",{class:p(["story_next story_controller",e.index===e.length-1?"story_controller_disabled":""]),onClick:t[2]||(t[2]=s=>n.changeStory(1))},t[7]||(t[7]=[o("span",{class:"material-symbols-outlined"}," arrow_forward ",-1)]),2)])]),o("div",B,[t[8]||(t[8]=o("span",{class:"s_id"},null,-1)),o("h1",C,a(e.title),1),o("h5",T,a(e.sub),1),t[9]||(t[9]=o("hr",null,null,-1)),o("div",F,[(c(!0),d(m,null,f(e.story,(s,r)=>(c(),d("p",{class:"sector",key:r,innerHTML:s},null,8,H))),128))])])])}const O=g(b,[["render",M],["__scopeId","data-v-abb2ca2c"]]);export{O as default};
